# Street Scene Detection Configuration - Task Catalog
# Each detection task can define its own YOLO variant, dataset, classes, and training params

detection:
  # Default model configuration
  model:
    type: "yolo"
    variant: "yolov8n"
    num_classes: 80

  # Global training defaults (can be overridden per task)
  training:
    batch_size: 32
    learning_rate: 0.001
    epochs: 120
    optimizer: "sgd"
    momentum: 0.9
    weight_decay: 0.0005
    
  # Global data configuration
  data:
    image_size: [640, 640]
    mean: [0.485, 0.456, 0.406]
    std: [0.229, 0.224, 0.225]
    
  # Global augmentation configuration
  augmentation:
    horizontal_flip: 0.5
    brightness: 0.2
    contrast: 0.2
    saturation: 0.2

# Task catalog - each task inherits from defaults above
tasks:
  pedestrian_detection:
    description: "Pedestrian detection in street scenes"
    model:
      variant: "yolov8m"
      num_classes: 1
    dataset:
      yaml: "configs/datasets/pedestrian_detection.yaml"
      classes: ["person"]
    training:
      epochs: 100
      batch_size: 32
      learning_rate: 0.0001
      optimizer: "adam"
    augmentation:
      horizontal_flip: 0.5
    tracking_enabled: false

  vehicle_detection:
    description: "Vehicle detection in street scenes"
    model:
      variant: "yolov8m"
      num_classes: 5
    dataset:
      yaml: "configs/datasets/vehicle_detection.yaml"
      classes: ["car", "truck", "bus", "motorcycle", "bicycle"]
    training:
      epochs: 120
      batch_size: 32
      learning_rate: 0.0001
      optimizer: "adam"
    augmentation:
      horizontal_flip: 0.5
    tracking_enabled: false

  vehicle_tracking:
    description: "Vehicle tracking and re-identification"
    model:
      variant: "yolov8m"
      num_classes: 1
    dataset:
      yaml: "configs/datasets/vehicle_tracking.yaml"
      classes: ["vehicle"]
    training:
      epochs: 150
      batch_size: 16
      learning_rate: 0.00005
      optimizer: "adam"
    tracking:
      enabled: true
      tracker: "botsort.yaml"
      max_age: 30
      min_hits: 3
    augmentation:
      horizontal_flip: 0.5
      brightness: 0.1
      contrast: 0.1

# Mixed precision training
mixed_precision:
  enabled: true
  loss_scale: "dynamic"
